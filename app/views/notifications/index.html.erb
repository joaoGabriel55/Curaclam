<div class="container">
  <header class="page-header">
    <h1>Notifications</h1>
    <% if Notification.unread.any? %>
      <%= button_to "Mark All as Read", mark_all_as_read_notifications_path, method: :post, class: "btn btn-secondary" %>
    <% end %>
  </header>

  <% if @notifications.any? %>
    <div class="notifications-list">
      <% @notifications.each do |notification| %>
        <div class="notification-item <%= 'unread' unless notification.read %>" id="<%= dom_id(notification) %>">
          <div class="notification-content">
            <div class="notification-icon">
              <% if notification.notifiable.is_a?(CvAnalysis) %>
                <% if notification.notifiable.completed? %>
                  ‚úÖ
                <% elsif notification.notifiable.failed? %>
                  ‚ùå
                <% else %>
                  ‚è≥
                <% end %>
              <% else %>
                üîî
              <% end %>
            </div>
            <div class="notification-body">
              <p class="notification-message"><%= notification.message %></p>
              <span class="notification-time"><%= time_ago_in_words(notification.created_at) %> ago</span>
            </div>
          </div>

          <div class="notification-actions">
            <% if notification.has_link? %>
              <%= link_to "View", notification.link, class: "btn btn-primary btn-sm" %>
            <% end %>
            <% unless notification.read %>
              <%= button_to "Mark as Read", mark_as_read_notification_path(notification), method: :post, class: "btn btn-secondary btn-sm" %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <div class="empty-state-icon">üîî</div>
      <h3>No Notifications</h3>
      <p>You don't have any notifications yet. Upload a CV to get started!</p>
      <%= link_to "Upload CV", new_cv_analysis_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
